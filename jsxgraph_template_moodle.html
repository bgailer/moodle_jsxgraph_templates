<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>JSXGraph template</title>
    <!-- JSXGraph (Lokal) -->
    <!--<link href="lib/jsxgraph.css" rel="stylesheet" type="text/css" />
    <script src="lib/jsxgraphcore.js" type="text/javascript" charset="UTF-8"></script>-->
    <!-- JSXGraph (CDN) -->
    <link href="https://cdn.jsdelivr.net/npm/jsxgraph@1.3.0/distrib/jsxgraph.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.jsdelivr.net/npm/jsxgraph@1.3.0/distrib/jsxgraphcore.js" type="text/javascript"
        charset="UTF-8"></script>
    <!-- MathJax 2 -->
    <script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.8/MathJax.js?config=TeX-AMS_HTML" async></script>
    <!-- MathJax 3 -->
    <!--<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" id="MathJax-script" async ></script>-->
    <!-- Moodle OTHAW Styles -->
    <link rel="stylesheet" href="https://moodle.oth-aw.de/theme/styles.php/boost_campus/1649880327_1632249341/all">
    <!-- Font Awesome 4 -->
    <link rel="stylesheet" type="text/css"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.2/css/font-awesome.min.css" />
    <!-- JSXGraph Styles aus dem Projekt IdeaL -->
    <style>
        /* JSXGraph div */
        .jxgbox {
            /* klassisches Layout */
            border: none;
            border-radius: 0;
            background-color: inherit;
            /* responsive */
            margin: 0 auto;
            overflow: hidden;
        }

        /* JSXGraph Textbox */
        .ideal-jsxgraph-textbox {
            background-color: #f8f9fa;
            border: 1px solid var(--gray);
            padding: .5em;
            box-shadow: 0 0 2px 1px rgba(0, 0, 0, 0.12);
        }
    </style>
    <!-- Mathjax Displaystyle Workaround -->
    <style>
        .MathJax_Display {
            margin: 0 !important;
        }
    </style>
</head>

<body>

    <main style="margin: 1em;">

        <h1>
            <center>JSXGraph Moodle Filter Template</center>
            <hr>
        </h1>

        <!-- STACK Frage -->
        <div class="que description informationitem">
            <div class="formulation">
                <div class="qtext">
                    <p>This is a description.</p>

                    <!-- JSXGraph Applet div -->
                    <div id="jxgbox" class="jxgbox" style="width:500px; height:500px; margin: auto"></div>

                    <!-- JSXGraph Coding -->
                    <script class="jsxgraph-construction">

                        /* Optionen */
                        /*-----------------------------------------*/

                        /* MathJax */
                        JXG.Options.text.useMathJax = true;
                        /* Highlighting Achsen ausschalten */
                        JXG.Options.axis = JXG.merge(JXG.Options.axis, {
                            highlight: false,
                            label: { highlight: false },
                            ticks: { label: { highlight: false } }
                        })
                        /* Highlighting Text ausschalten */
                        JXG.Options.text = JXG.merge(JXG.Options.text, {
                            highlight: false, fixed: true
                        })
                        /* Highlighting Kurven ausschalten */
                        JXG.Options.curve = JXG.merge(JXG.Options.curve, {
                            highlight: false, fixed: true
                        })

                        /*-----------------------------------------*/


                        /* Variablen */
                        /*-----------------------------------------*/

                        const p1Coords = [1, 2];

                        /*-----------------------------------------*/
                        /* Board */
                        const board = JXG.JSXGraph.initBoard(
                            "jxgbox",
                            {
                                axis: false,
                                grid: true,
                                title: "jsxgraph template",
                                showCopyright: false,
                                keepaspectratio: true,
                                showInfobox: false,
                                boundingbox: [-5, 5, 5, -5],
                                pan: { enabled: true },
                                zoom: { enabled: true },
                            }
                        );
                        /* Koordinatensystem */
                        const xAxis = board.create('axis', [[0, 0], [1, 0]],
                            {
                                name: function () { return '\\( x \\)' },
                                withLabel: true,
                                label: { position: 'rt', offset: [-12, 0], anchorY: "bottom" },
                                ticks: { visible: false, ticksDistance: 1, minorTicks: 1, drawLabels: false }
                            });
                        const yAxis = board.create('axis', [[0, 0], [0, 1]],
                            {
                                name: function () { return '\\( y \\)' },
                                withLabel: true, drawLabels: true,
                                label: { position: 'rt', offset: [-12, 2], anchorY: "top" },
                                ticks: { visible: false, ticksDistance: 1, minorTicks: 1, drawLabels: false }
                            });
                        /* Special ticks */
                        const xTicks = board.create("ticks", [xAxis, [1]], {
                            minorTicks: 0, majorHeight: 12, highlight: false, strokeColor: "black", drawLabels: true,
                            label: {
                                anchorY: "top", offset: [4, -6]
                            },
                            labels: ["1"]
                        })
                        const yTicks = board.create("ticks", [yAxis, [1]], {
                            minorTicks: 0, majorHeight: 12, highlight: false, strokeColor: "black", drawLabels: true,
                            label: {
                                anchorY: "top", offset: [10, 14]
                            },
                            labels: ["1"]
                        })


                        /*-----------------------------------------*/


                        /* JSXGraph Elemente */
                        /*-----------------------------------------*/


                        const p1 = board.create("point", p1Coords);
                        const text1 = board.create("text", [3, 3, () => "\\(x = \\) " + p1.X().toFixed(2) + "<br>\\(y = \\) " + p1.Y().toFixed(2)], {
                            parse: false, cssClass: "ideal-jsxgraph-textbox", anchorY: "top", anchorX: "left"
                        })
                        const f1 = board.create("functiongraph", [function (x) { return -0.5 * x ** 2 - x; }], {
                            name: "\\(f_x\\)", withLabel: true, label: { color: "blue", position: "top" }
                        })



                        /*-----------------------------------------*/


                        /* Eventlisteners */
                        /*-----------------------------------------*/

                        p1.on("drag", function () {
                            logPointCoords(this);
                        });

                        /*-----------------------------------------*/


                        /* Funktionsdeklarationen */
                        /*-----------------------------------------*/

                        function logPointCoords(point) {
                            console.log(point.X(), point.Y())
                        }

                        /*-----------------------------------------*/


                    </script>
                </div>
            </div>
        </div>
    </main>
</body>

</html>